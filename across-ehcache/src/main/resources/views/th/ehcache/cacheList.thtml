<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<title>List ehcache caches</title>
</head>
<body th:fragment="content">
<div class="debug-ehcache row">
	<h3>Cache list</h3>

	<div class="feedback" th:if="${param.flushed}">
		<span th:text="${param.flushed[0]}">0</span> cache(s) have been flushed.
	</div>

	<div>
		<a th:href="@{${@debugWeb.path('/ehcache/flush')}}" onclick="return confirm('Are you sure you want to flush all caches?');">flush</a>
		<a th:href="@{${@debugWeb.path('/ehcache')}}">refresh</a>
	</div>

	<div class="cache" th:each="cache : ${cacheList}">
		<table class="cache-details" th:object="${cache}">
			<tr>
				<th colspan="2" class="cache-name">
					<a href="#" th:href="@{${@debugWeb.path('/ehcache/view')}(cache=${cache.name})}" th:text="${cache.name}">cache
						name</a>
				</th>
			</tr>
			<tr>
				<th>Items</th>
				<td th:text="*{size}">0</td>
			</tr>
			<tr>
				<th>Hits</th>
				<td th:text="*{statistics.cacheHitCount()}">0</td>
			</tr>
			<tr>
				<th>Misses</th>
				<td th:text="*{statistics.cacheMissCount()}">${stats.cacheMisses}</td>
			</tr>
			<tr>
				<th>Ratio</th>
				<td th:text="*{#numbers.formatDecimal(((statistics.cacheHitCount() * 1.0) / (statistics.cacheHitCount() + statistics.cacheMissCount())) * 100, 1, 2)} + ' %'">
					100 %
				</td>
			</tr>
			<tr>
				<th>Evictions</th>
				<td th:text="*{statistics.cacheEvictedCount()}">0</td>
			</tr>
			<tr>
				<th>Heap size</th>
				<td th:text="*{#numbers.formatDecimal(statistics.getExtended().localHeapSizeInBytes().value() / 1024.0,1,2)} + ' KB'">0 KB</td>
			</tr>
		</table>
	</div>
</div>
</body>
</html>